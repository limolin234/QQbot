# QQ Bot with LangGraph Agent

åŸºäº NapCat å’Œ LangGraph çš„ QQ ç¾¤èŠæœºå™¨äººï¼Œæ”¯æŒå¯¹è¯è®°å¿†å’Œæ™ºèƒ½å“åº”ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- âœ… **å®æ—¶æ¶ˆæ¯å¤„ç†**ï¼šåŸºäº WebSocket å®æ—¶æ¥æ”¶å’Œå“åº”ç¾¤æ¶ˆæ¯
- âœ… **æ™ºèƒ½å”¤é†’**ï¼šæ”¯æŒ @ å”¤é†’å’Œå…³é”®è¯å”¤é†’ï¼ˆå°åŠ©æ‰‹ã€botã€æœºå™¨äººç­‰ï¼‰
- âœ… **å¯¹è¯è®°å¿†**ï¼šä½¿ç”¨ LangGraph çš„ checkpointing æœºåˆ¶ï¼Œæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹çš„å¯¹è¯ä¸Šä¸‹æ–‡
- âœ… **å®‰å…¨ä¿æŠ¤**ï¼šæ¶ˆæ¯é•¿åº¦é™åˆ¶ï¼ˆ500å­—ç¬¦ï¼‰å’Œé¢‘ç‡é™åˆ¶ï¼ˆ10æ¡/åˆ†é’Ÿï¼‰
- âœ… **æ¨¡å—åŒ–æ¶æ„**ï¼šæ˜“äºæ‰©å±•å¤šç¾¤ã€å¤š Agent æ”¯æŒ
- âœ… **å®Œæ•´æ—¥å¿—**ï¼šè¯¦ç»†çš„è¿è¡Œæ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§
- âœ… **æ¶ˆæ¯å¤„ç†æ—¥å¿—**ï¼šç‹¬ç«‹çš„æ¶ˆæ¯å¤„ç†æ—¥å¿—ï¼Œæ¸…æ™°è®°å½• Agent çš„æ‰€æœ‰è¡ŒåŠ¨
- âœ… **çµæ´»é…ç½®**ï¼šæ¨¡å‹ IDã€ç³»ç»Ÿæç¤ºè¯ã€ç¾¤å·ç­‰å‚æ•°å¯åœ¨é…ç½®æ–‡ä»¶ä¸­è°ƒæ•´

## ğŸ¯ å·²æµ‹è¯•åŠŸèƒ½

- âœ… WebSocket è¿æ¥åˆ° NapCat
- âœ… è‡ªåŠ¨è·å– Bot QQ å·
- âœ… @ æ¶ˆæ¯è¯†åˆ«å’Œå“åº”
- âœ… å…³é”®è¯å”¤é†’
- âœ… LangGraph Agent å¯¹è¯ç”Ÿæˆ
- âœ… æ¶ˆæ¯å‘é€åˆ°ç¾¤èŠ

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Python 3.8+
- NapCatï¼ˆå·²å®‰è£…å¹¶è¿è¡Œï¼‰
- OpenAI Compatible APIï¼ˆå¦‚ Yunwu AIã€DeepSeek ç­‰ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

`.env` æ–‡ä»¶é…ç½®ï¼ˆå·²åŒ…å«ï¼‰ï¼š
```env
YUNWU_API_KEY = sk-xxx...
API_BASE_URL = https://yunwu.ai/v1
```

**æ³¨æ„**ï¼šä¸éœ€è¦é…ç½® NapCat ç›¸å…³çš„ Tokenï¼Œæœ¬åœ°è¿æ¥æ— éœ€è®¤è¯ã€‚

### 3. é…ç½® NapCat WebSocket æœåŠ¡

#### æ­¥éª¤ï¼š
1. å¯åŠ¨ NapCat
2. è®¿é—® WebUIï¼š`http://127.0.0.1:6099/webui/`
3. ç™»å½•åè¿›å…¥"ç½‘ç»œé…ç½®"
4. æ·»åŠ  **WebSocket æœåŠ¡ç«¯**é…ç½®ï¼š

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| å¯ç”¨ | âœ… å¼€å¯ | å¿…é¡»å¼€å¯ |
| Host | `127.0.0.1` | æœ¬åœ°ç›‘å¬ |
| Port | `3001` | é»˜è®¤ç«¯å£ï¼ˆä¸ä»£ç é…ç½®ä¸€è‡´ï¼‰ |
| ä¸ŠæŠ¥è‡ªèº«æ¶ˆæ¯ | âŒ å…³é—­ | é¿å… bot å“åº”è‡ªå·±çš„æ¶ˆæ¯ |
| å¼ºåˆ¶æ¨é€äº‹ä»¶ | âœ… å¼€å¯ | ç¡®ä¿äº‹ä»¶æ­£å¸¸æ¨é€ |
| Token | ç•™ç©º | æœ¬åœ°è¿æ¥ä¸éœ€è¦ Token |
| å¿ƒè·³é—´éš” | `30000` | é»˜è®¤å€¼å³å¯ |
| å¼€å¯ Debug | âœ… å¼€å¯ | æµ‹è¯•é˜¶æ®µå»ºè®®å¼€å¯ |

5. ä¿å­˜é…ç½®å¹¶é‡å¯ NapCat

### 4. é…ç½® Bot å‚æ•°

ç¼–è¾‘ `config/bot_config.py`ï¼š

#### åŸºç¡€é…ç½®
```python
# ç›‘å¬çš„ç¾¤å·ï¼ˆä¿®æ”¹ä¸ºä½ çš„æµ‹è¯•ç¾¤ï¼‰
MONITORED_GROUPS = [1075786046]
```

#### Agent é…ç½®
```python
# LLM æ¨¡å‹ ID
MODEL_ID = "deepseek-v3"

# Agent ç³»ç»Ÿæç¤ºè¯ï¼ˆå®šä¹‰ Bot çš„æ€§æ ¼å’Œè¡Œä¸ºï¼‰
AGENT_SYSTEM_PROMPT = """ä½ æ˜¯ä¸€ä¸ªå‹å¥½ã€ä¹äºåŠ©äººçš„ QQ ç¾¤åŠ©æ‰‹ã€‚

ä½ çš„ç‰¹ç‚¹ï¼š
- å›ç­”ç®€æ´æ˜äº†ï¼Œä¸å•°å—¦
- è¯­æ°”è½»æ¾å‹å¥½ï¼Œé€‚åˆç¾¤èŠæ°›å›´
- èƒ½å¤Ÿè®°ä½å¯¹è¯å†å²ï¼Œæä¾›è¿è´¯çš„å¯¹è¯ä½“éªŒ
- é‡åˆ°ä¸ç¡®å®šçš„é—®é¢˜ä¼šè¯šå®åœ°è¯´ä¸çŸ¥é“

è¯·ç”¨ä¸­æ–‡å›å¤ï¼Œä¿æŒå‹å¥½å’Œä¸“ä¸šã€‚"""
```

#### å”¤é†’é…ç½®
```python
# å”¤é†’å…³é”®è¯ï¼ˆæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼‰
WAKE_WORDS = [
    r"å°åŠ©æ‰‹",
    r"bot",
    r"æœºå™¨äºº",
    r"åŠ©æ‰‹"
]
```

#### å®‰å…¨é…ç½®
```python
# æœ€å¤§æ¶ˆæ¯é•¿åº¦ï¼ˆå­—ç¬¦ï¼‰
MAX_MESSAGE_LENGTH = 500

# æ¯åˆ†é’Ÿæœ€å¤§æ¶ˆæ¯æ•°
MAX_MESSAGES_PER_MINUTE = 10

# è¿è§„æ¬¡æ•°é˜ˆå€¼
VIOLATION_THRESHOLD = 3
```

**è¯¦ç»†é…ç½®è¯´æ˜è¯·æŸ¥çœ‹ [CONFIG.md](CONFIG.md)**

### 5. è¿è¡Œ Bot

```bash
python main.py
```

**æˆåŠŸå¯åŠ¨çš„æ—¥å¿—ç¤ºä¾‹**ï¼š
```
2026-02-04 15:57:16 | INFO     | __main__:main - ==================================================
2026-02-04 15:57:16 | INFO     | __main__:main - QQ Bot å¯åŠ¨ä¸­...
2026-02-04 15:57:16 | INFO     | __main__:main - ==================================================
2026-02-04 15:57:16 | INFO     | core.napcat_client:connect - æ­£åœ¨è¿æ¥åˆ° NapCat WebSocket: ws://127.0.0.1:3001
2026-02-04 15:57:16 | SUCCESS  | core.napcat_client:connect - WebSocket è¿æ¥æˆåŠŸ
2026-02-04 15:57:17 | INFO     | core.napcat_client:_fetch_bot_qq - Bot QQ å·: 3014249817
2026-02-04 15:57:17 | INFO     | __main__:main - Bot QQ: 3014249817
2026-02-04 15:57:17 | INFO     | __main__:main - åˆå§‹åŒ– LangGraph Agent...
2026-02-04 15:57:17 | INFO     | agents.simple_chat_agent:__init__ - SimpleChatAgent åˆå§‹åŒ–å®Œæˆï¼Œæ¨¡å‹: deepseek-v3.2
2026-02-04 15:57:17 | SUCCESS  | __main__:main - æ‰€æœ‰ç»„ä»¶åˆå§‹åŒ–å®Œæˆ
2026-02-04 15:57:17 | INFO     | __main__:main - å¼€å§‹ç›‘å¬æ¶ˆæ¯...
```

## ğŸ’¬ ä½¿ç”¨æ–¹æ³•

åœ¨é…ç½®çš„ QQ ç¾¤ä¸­æµ‹è¯•ï¼š

### 1. @ å”¤é†’æ–¹å¼
```
@bot ä½ å¥½
@bot ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ
```

### 2. å…³é”®è¯å”¤é†’æ–¹å¼
```
å°åŠ©æ‰‹ï¼Œå¸®æˆ‘å†™ä¸€æ®µä»£ç 
botï¼Œä½ èƒ½åšä»€ä¹ˆï¼Ÿ
æœºå™¨äººï¼Œä»‹ç»ä¸€ä¸‹è‡ªå·±
```

### 3. å¯¹è¯è®°å¿†æµ‹è¯•
```
ç”¨æˆ·ï¼šå°åŠ©æ‰‹ï¼Œæˆ‘å«å¼ ä¸‰
Botï¼šä½ å¥½å¼ ä¸‰ï¼å¾ˆé«˜å…´è®¤è¯†ä½ ...

ç”¨æˆ·ï¼šä½ è¿˜è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿ
Botï¼šå½“ç„¶è®°å¾—ï¼Œä½ æ˜¯å¼ ä¸‰...
```

**æ³¨æ„**ï¼š
- Bot ä¼šä¸ºæ¯ä¸ªç”¨æˆ·ç»´æŠ¤ç‹¬ç«‹çš„å¯¹è¯å†å²ï¼ˆåŸºäº `group_id` + `user_id`ï¼‰
- ä¸åŒç”¨æˆ·çš„å¯¹è¯äº’ä¸å¹²æ‰°
- å¯¹è¯å†å²å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆä½¿ç”¨ LangGraph çš„ `MemorySaver`ï¼‰

## é¡¹ç›®ç»“æ„

```
QQbot/
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ napcat_config.py # NapCat è¿æ¥é…ç½®
â”‚   â””â”€â”€ bot_config.py    # Bot è¡Œä¸ºé…ç½®
â”œâ”€â”€ core/                # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ napcat_client.py # WebSocket å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ message_filter.py# æ¶ˆæ¯è¿‡æ»¤å™¨
â”‚   â””â”€â”€ message_handler.py# æ¶ˆæ¯å¤„ç†å™¨
â”œâ”€â”€ agents/              # Agent å®ç°
â”‚   â””â”€â”€ simple_chat_agent.py # LangGraph Agent
â”œâ”€â”€ utils/               # å·¥å…·æ¨¡å—
â”‚   â”œâ”€â”€ logger.py        # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ security.py      # å®‰å…¨é™åˆ¶
â”œâ”€â”€ logs/                # æ—¥å¿—ç›®å½•
â”œâ”€â”€ main.py              # ä¸»ç¨‹åº
â””â”€â”€ .env                 # ç¯å¢ƒå˜é‡
```

## ğŸ”’ å®‰å…¨æœºåˆ¶

ä¸ºäº†é˜²æ­¢ Bot è¢«æ»¥ç”¨æˆ–å‘é€è¿‡å¤šæ¶ˆæ¯ï¼Œå®ç°äº†ä»¥ä¸‹å®‰å…¨é™åˆ¶ï¼š

### æ¶ˆæ¯é•¿åº¦é™åˆ¶
- **é™åˆ¶**ï¼šå•æ¡æ¶ˆæ¯æœ€å¤š 500 å­—ç¬¦
- **è§¦å‘å**ï¼šæ¶ˆæ¯ä¸ä¼šå‘é€ï¼Œè®°å½•è¿è§„æ—¥å¿—

### é¢‘ç‡é™åˆ¶
- **é™åˆ¶**ï¼šæ¯ä¸ªç¾¤æ¯åˆ†é’Ÿæœ€å¤šå‘é€ 10 æ¡æ¶ˆæ¯
- **è§¦å‘å**ï¼šæ¶ˆæ¯ä¸ä¼šå‘é€ï¼Œè®°å½•è¿è§„æ—¥å¿—

### è¿è§„å¤„ç†
- **ç´¯è®¡è¿è§„ 3 æ¬¡**ï¼šè‡ªåŠ¨æš‚åœè¯¥ç¾¤çš„æœåŠ¡
- **æ¢å¤æ–¹å¼**ï¼šéœ€è¦æ‰‹åŠ¨è°ƒç”¨ `security_limiter.resume_group(group_id)`

### é…ç½®ä¿®æ”¹

åœ¨ `config/bot_config.py` ä¸­è°ƒæ•´ï¼š
```python
MAX_MESSAGE_LENGTH = 500  # ä¿®æ”¹æœ€å¤§é•¿åº¦
MAX_MESSAGES_PER_MINUTE = 10  # ä¿®æ”¹é¢‘ç‡é™åˆ¶
```

## ğŸ”§ æ•…éšœæ’æŸ¥

### 1. æ— æ³•è¿æ¥åˆ° NapCat

**é”™è¯¯ä¿¡æ¯**ï¼š`WebSocket è¿æ¥å¤±è´¥`

**è§£å†³æ–¹æ³•**ï¼š
- âœ… æ£€æŸ¥ NapCat æ˜¯å¦æ­£åœ¨è¿è¡Œ
- âœ… æ£€æŸ¥ WebSocket æœåŠ¡ç«¯æ˜¯å¦å·²å¯ç”¨ï¼ˆåœ¨ WebUI ä¸­æŸ¥çœ‹ï¼‰
- âœ… ç¡®è®¤ç«¯å£å·ä¸º `3001`ï¼ˆæˆ–ä¿®æ”¹ `config/napcat_config.py` ä¸­çš„é…ç½®ï¼‰
- âœ… æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦é˜»æ­¢äº†æœ¬åœ°è¿æ¥

### 2. æ— æ³•è·å– Bot QQ å·

**é”™è¯¯ä¿¡æ¯**ï¼š`æ— æ³•è·å– Bot QQ å·`

**è§£å†³æ–¹æ³•**ï¼š
- âœ… ç¡®è®¤ NapCat å·²æˆåŠŸç™»å½• QQ
- âœ… æ£€æŸ¥ WebSocket é…ç½®ä¸­çš„ Token æ˜¯å¦ä¸ºç©ºï¼ˆåº”è¯¥ç•™ç©ºï¼‰
- âœ… æŸ¥çœ‹ NapCat æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
- âœ… å°è¯•é‡å¯ NapCat

### 3. Bot ä¸å“åº”æ¶ˆæ¯

**ç°è±¡**ï¼šå‘é€æ¶ˆæ¯å Bot æ²¡æœ‰å›å¤

**è§£å†³æ–¹æ³•**ï¼š
- âœ… æ£€æŸ¥ç¾¤å·æ˜¯å¦åœ¨ `MONITORED_GROUPS` ä¸­
- âœ… ç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„å”¤é†’æ–¹å¼ï¼ˆ@ æˆ–å…³é”®è¯ï¼‰
- âœ… æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `logs/bot.log` ç¡®è®¤æ¶ˆæ¯æ˜¯å¦è¢«æ¥æ”¶
- âœ… æ£€æŸ¥æ˜¯å¦è§¦å‘äº†å®‰å…¨é™åˆ¶ï¼ˆé¢‘ç‡æˆ–é•¿åº¦ï¼‰

### 4. API è°ƒç”¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`LLM è°ƒç”¨å¤±è´¥`

**è§£å†³æ–¹æ³•**ï¼š
- âœ… æ£€æŸ¥ `.env` ä¸­çš„ `YUNWU_API_KEY` æ˜¯å¦æ­£ç¡®
- âœ… æ£€æŸ¥ `API_BASE_URL` æ˜¯å¦å¯è®¿é—®
- âœ… ç¡®è®¤ API ä½™é¢æ˜¯å¦å……è¶³
- âœ… æ£€æŸ¥ç½‘ç»œè¿æ¥

### 5. æ¶ˆæ¯æ ¼å¼é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š`expected string or bytes-like object, got 'list'`

**è§£å†³æ–¹æ³•**ï¼š
- âœ… å·²ä¿®å¤ï¼šä»£ç ç°åœ¨æ”¯æŒ NapCat çš„åˆ—è¡¨æ ¼å¼æ¶ˆæ¯
- âœ… å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„ä»£ç 

### 6. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

Bot ç»´æŠ¤ä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ï¼š

#### ä¸»æ—¥å¿— (`logs/bot.log`)
è®°å½•æ‰€æœ‰ç³»ç»Ÿè¿è¡Œä¿¡æ¯ã€é”™è¯¯ã€è°ƒè¯•ä¿¡æ¯

```bash
tail -f logs/bot.log
```

#### æ¶ˆæ¯å¤„ç†æ—¥å¿— (`logs/message_handler.log`)
ä¸“é—¨è®°å½• Agent å¤„ç†çš„æœ‰æ•ˆæ¶ˆæ¯å’Œè¡ŒåŠ¨

```bash
tail -f logs/message_handler.log
```

**æ¶ˆæ¯å¤„ç†æ—¥å¿—ç¤ºä¾‹**ï¼š
```
15:57:39 | [æ¶ˆæ¯å¤„ç†] | ğŸ“¨ æ”¶åˆ°æ¶ˆæ¯ | ç¾¤:1075786046 | ç”¨æˆ·:å¼ ä¸‰(123456) | å†…å®¹:å°åŠ©æ‰‹ï¼Œä½ å¥½
15:57:39 | [æ¶ˆæ¯å¤„ç†] | ğŸ¤– Agentå¤„ç†ä¸­ | ç¾¤:1075786046 | ç”¨æˆ·:123456 | æ¶ˆæ¯:ä½ å¥½
15:57:40 | [æ¶ˆæ¯å¤„ç†] | ğŸ’¬ Agentå›å¤ | ç¾¤:1075786046 | ç”¨æˆ·:123456 | å›å¤:ä½ å¥½ï¼æˆ‘æ˜¯ç¾¤åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ
15:57:40 | [æ¶ˆæ¯å¤„ç†] | âœ… æ¶ˆæ¯å·²å‘é€ | ç¾¤:1075786046
```

## ğŸš€ æ‰©å±•å¼€å‘

### 1. æ·»åŠ æ–°çš„ Agent

åˆ›å»ºè‡ªå®šä¹‰ Agent æ¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼š

```python
# agents/custom_agent.py
from agents.simple_chat_agent import SimpleChatAgent

class CustomAgent(SimpleChatAgent):
    def _build_graph(self):
        # è‡ªå®šä¹‰å·¥ä½œæµ
        # å¯ä»¥æ·»åŠ å·¥å…·ã€æ¡ä»¶åˆ†æ”¯ç­‰
        pass
```

åœ¨ `main.py` ä¸­åˆ‡æ¢ï¼š
```python
from agents.custom_agent import CustomAgent
agent = CustomAgent(api_key, base_url)
```

### 2. æ”¯æŒå¤šä¸ªç¾¤

åœ¨ `config/bot_config.py` ä¸­æ·»åŠ ç¾¤å·ï¼š
```python
MONITORED_GROUPS = [
    1075786046,  # æµ‹è¯•ç¾¤
    123456789,   # ç”Ÿäº§ç¾¤ 1
    987654321    # ç”Ÿäº§ç¾¤ 2
]
```

### 3. ä¸åŒç¾¤ä½¿ç”¨ä¸åŒ Agent

ä¿®æ”¹ `main.py`ï¼Œæ ¹æ®ç¾¤å·é€‰æ‹© Agentï¼š

```python
# åˆ›å»º Agent æ˜ å°„
agents = {
    1075786046: SimpleChatAgent(api_key, base_url),
    123456789: CustomAgent(api_key, base_url),
}

# åœ¨æ¶ˆæ¯å¤„ç†ä¸­æ ¹æ®ç¾¤å·é€‰æ‹© Agent
group_id = message_data.get("group_id")
agent = agents.get(group_id, default_agent)
```

### 4. æ·»åŠ å·¥å…·è°ƒç”¨ï¼ˆToolsï¼‰

åœ¨ LangGraph Agent ä¸­é›†æˆå¤–éƒ¨å·¥å…·ï¼š

```python
from langchain_core.tools import tool
from langgraph.prebuilt import ToolNode

@tool
def search_web(query: str) -> str:
    """æœç´¢ç½‘ç»œä¿¡æ¯"""
    # å®ç°æœç´¢é€»è¾‘
    return "æœç´¢ç»“æœ..."

# åœ¨ Agent ä¸­æ·»åŠ å·¥å…·
tools = [search_web]
llm_with_tools = self.llm.bind_tools(tools)
```

å‚è€ƒ [LangGraph Tools æ–‡æ¡£](https://langchain-ai.github.io/langgraph/how-tos/tool-calling/)

### 5. æŒä¹…åŒ–å¯¹è¯å†å²

å°†å†…å­˜å­˜å‚¨æ›¿æ¢ä¸ºæ•°æ®åº“å­˜å‚¨ï¼š

```python
# ä½¿ç”¨ SQLite
from langgraph.checkpoint.sqlite import SqliteSaver

memory = SqliteSaver.from_conn_string("checkpoints.db")
graph = graph_builder.compile(checkpointer=memory)
```

æˆ–ä½¿ç”¨ PostgreSQLï¼š
```python
from langgraph.checkpoint.postgres import PostgresSaver

memory = PostgresSaver.from_conn_string("postgresql://...")
```

### 6. æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆIDLE ä»»åŠ¡ï¼‰

å®ç°å®šæœŸæ€»ç»“åŠŸèƒ½ï¼ˆå‚è€ƒ `famework.md`ï¼‰ï¼š

```python
import asyncio

async def idle_task():
    """å®šæœŸæ€»ç»“ä»»åŠ¡"""
    while True:
        await asyncio.sleep(3600)  # æ¯å°æ—¶æ‰§è¡Œ
        # è¯»å–æ—¥å¿—ï¼Œç”Ÿæˆæ€»ç»“
        # å‘é€åˆ°ç¾¤
        pass

# åœ¨ main.py ä¸­å¯åŠ¨
asyncio.create_task(idle_task())
```

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [NapCat å®˜æ–¹æ–‡æ¡£](https://napneko.github.io/) - NapCat å®‰è£…å’Œé…ç½®
- [NapCat API æ–‡æ¡£](https://napneko.github.io/develop/api) - OneBot 11 API æ¥å£è¯´æ˜
- [LangGraph æ–‡æ¡£](https://langchain-ai.github.io/langgraph/) - LangGraph ä½¿ç”¨æŒ‡å—
- [LangGraph æ•™ç¨‹](https://langchain-ai.github.io/langgraph/tutorials/introduction/) - å…¥é—¨æ•™ç¨‹
- [OneBot 11 æ ‡å‡†](https://github.com/botuniverse/onebot-11) - OneBot åè®®è§„èŒƒ

## ğŸ“ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| æ¶ˆæ¯æ¥å£ | NapCat + WebSocket | åŸºäº NTQQ çš„ OneBot 11 åè®®å®ç° |
| Agent æ¡†æ¶ | LangGraph | çŠ¶æ€ç®¡ç†å’Œå·¥ä½œæµç¼–æ’ |
| LLM | OpenAI Compatible API | æ”¯æŒ Yunwu AIã€DeepSeek ç­‰ |
| å¼‚æ­¥æ¡†æ¶ | asyncio + websockets | é«˜æ€§èƒ½å¼‚æ­¥å¤„ç† |
| æ—¥å¿— | loguru | ç»“æ„åŒ–æ—¥å¿—è®°å½• |
| é…ç½®ç®¡ç† | python-dotenv | ç¯å¢ƒå˜é‡ç®¡ç† |

## ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„ç›®å½•ç»“æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
2. **å¼‚æ­¥å¤„ç†**ï¼šä½¿ç”¨ asyncio å®ç°é«˜æ€§èƒ½æ¶ˆæ¯å¤„ç†
3. **å®‰å…¨å¯é **ï¼šå®Œå–„çš„å®‰å…¨é™åˆ¶å’Œé”™è¯¯å¤„ç†
4. **æ˜“äºæ‰©å±•**ï¼šæ”¯æŒå¤šç¾¤ã€å¤š Agentã€å·¥å…·è°ƒç”¨ç­‰æ‰©å±•
5. **å®Œæ•´æ—¥å¿—**ï¼šè¯¦ç»†çš„æ—¥å¿—è®°å½•ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§

## ğŸ“„ License

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·åœ¨ GitHub ä¸Šæäº¤ Issueã€‚

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œå¹³å°è§„åˆ™ã€‚
